# REST API приложения "Ферма"

Приложение осуществляет учет деятельности сельскохозяйственной фермы.
Пользователь может иметь роль администратора или работника.

Возможности работника:
- авторизация в приложении
- отправка отчетов по выработке продукции
- получение информации о том, сколько осталось до выполнения дневной нормы
- просмотр норм выработки по отдельным продуктам, установленных для него
- просмотр оценок, выставленных администратором.

Возможности администратора:
- авторизация в приложении
- регистрация новых работников и увольнение ранее зарегистрированных
- установка норм выработки продуктов отдельно для каждого работника
- добавление новых типов продукции
- выставление оценок работникам
- просмотр отчетов работников
- просмотр итоговых отчетов по произведенным товарам (за конкретный день, неделю или месяц) 
по конкретному работнику, а также по ферме в целом
- получение на почту итогового отчета по собранным товарам за текущий день
- все возможности работника.

### Использованные технологии
- Java 17;
- Spring Boot 3;
- Spring Security;
- JWT;
- Spring Data;
- Hibernate;
- PostgreSQL;
- Kafka;
- Docker;
- Swagger / OpenAPI
- JSON

### Запуск приложения
Перед запуском Spring Boot приложения необходимо осуществить запуск Postgres, Zookeeper 
и Kafka, выполнив в корневой директории приложения команду ``docker-compose up``.

# REST API

Полное описание доступно по адресу http://localhost:8082/swagger-ui/index.html#

Ниже приведен краткий перечень API-эндпойнтов

## Контроллер отчетов о выработке

Содержит операции с отчётами о выработке:

### Добавление отчёта
 `POST /api/v1/gather-report/add`
 
 Пример запроса: ``{
 "productId": 1,
 "userId": 2,
 "quantity": 87
 }``

### Суммарная выработка одного вида продукции по всей ферме
 `GET
 /api/v1/gather-report/sum`
 
### Суммарная выработка одного вида продукции одним работником
`GET
/api/v1/gather-report/sum/user/{userId}`

### Статистика отчётов в общем по ферме для одного вида продукции
`GET
/api/v1/gather-report/product/{productId}`

### Статистика отчётов работника для одного вида продукции
`GET
/api/v1/gather-report/product/{productId}/user/{userId}`



## Контроллер оценок

Содержит операции с оценками, присвоенными работникам:

### Добавление оценки работнику
`POST
/api/v1/rating/new`

### Получение списка оценок работника
`GET
/api/v1/rating/user/{userId}`

## Контроллер аутентификации

Содержит операции с аутентификацией пользователей:

### Создать токен авторизации
`POST
/api/v1/auth`

## Контроллер пользователей

Содержит операции с учетными записями пользователей

### Регистрация нового пользователя
`POST
/api/v1/user/new`

### Увольнение работника
`PATCH
/api/v1/user/dismiss/{userId}`

## Контроллер норм выработки

Содержит операции с нормой выработки:

### Обновить дневную норму выработки
`PUT
/api/v1/daily-norm/new`

### Получить норму выработки
`GET
/api/v1/daily-norm/user/{userId}/product/{productId}`

## Контроллер продукции

Содержит операции с типами продукции

### Добавление нового вида продукции
`POST
/api/v1/product/new`

## Email-controller
### Отправка итогового отчёта по собранным товарам за текущий день на email
`GET
/api/v1/email` 

# COMING SOON
В ближайшее время планируется функционал отправки итогового отчета ежедневно 
в заданное время, в данной версии такой отчет можно получить с помощью запроса: `GET
/api/v1/email`   

